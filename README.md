# Aegis
This is a comprehensive repository to predict the radio emission from exoplanets driven by Cyclotron Maser Instability (CMI)
as a probe of planetary magnetism.




## Installation
he required packages are listed in "environment.yml", and "requirements.txt".

## Example use
You need to create a .csv file containing data from the NASA Exoplanet Archive with
the required parameters. The name of this file is "NASA[sample].csv", where
[sample] is usually the date (DDMM) the data was downloaded.


## Python Scripts 
The code is written entirely in Python.

### The Modules
The script "radio_module.py" provides a new module with an exoplanet class
and various functions that are used throughout the project. The script
"rotation_script.py" provides an additional module to randomly sample spin angular
momenta of exoplanets from the solar system distribution, contained in "rotation.csv".
Both of these modules are essential to run the main prediction script.

### The Wind Script
"wind.py" imports data from a .csv file obtained from the NASA Exoplanet
Archive with the required parameters, whose name is specified in the script.
It calculates the stellar wind temperatures and speed at the orbit
of the exoplanets in the sample, assuming isothermal Parker wind (Parker 1958).
The results are written out to be used in the main prediction script into the file "new_wind_info[sample].date"

### The Main Prediction Script
The main script that predicts exoplanetary emission characteristics is the file
"exoplanet_predictions.py". The script implements a Monte-Carlo error propagation
method to be used on exoplanets selected from the NASA Exoplanet Archive, in order to 
quantify uncertainty in the results. It also creates distribution histograms of 
the initial parameters in the sample and the posterior distributions of emission
characteristics of a select group of targets.

The script requires the exoplanet archive table to be in .csv format.
The results presented in the paper are obtained with a Monte Carlo iteration count of
10,000, although this number can be changed at will while running the script for the
sake of computation load. Running this script creates a number of result files summarized in
the Output Files section. It also creates "df1.csv" and "all.npz", which are used to create the figures
by "plotter.py".

### Visual Routines
"plotter.py" is the script creating Figures 7 and 8 of the manuscript, displaying the
distribution of emission characteristics among the planets in our sample. It requires the
existence of "df1.csv" and "all.npz", generated by "exoplanet_predictions.py". It also requires
files "nenufar.npz" and "sensitivities.csv" to plot the sensitivity limits of NENUFAR
and all the other telescopes. Both of these files are created externally.

The scripts "parker_spiral.py", "sketch.py", "visibility.py", and "radius_valley.py" are used to create four of the figures in the manuscript.
In the paper: the perpendicular component of the IMF in the orbit of an exoplanet (tau Boo b), the schematic drawing of a magnetized exoplanet, the visibility
figure containing all-sky maximum elevation and time-spent-above-20-degrees maps
for the considered telescopes, and the last figure in the paper that illustrates the
distribution of radii and magnetic field strengths of targets,
respectively. The first one requires the existence
of wind data from an exoplanet, currently tau Boo b, to be present in the directory
in .npz format. This file is presently "taub_wind.npz". The second is an independent script,
while the third requires the existence of the file "obs_table.csv" in the same 
working directory. This file is created within "extract.py", which extracts the
necessary information for the opportune targets determined from
"exoplanet_predictions.py". Finally, "radius_valley.py" requires the existence of
the table "all.csv" in the folder "Output Tables".

### Auxiliary Scripts
"does_it_make_a_difference.py" quantifies the effect of employing a stochastic Monte Carlo
approach to our final results, providing an important justification to the argument that our results may differ from others in the literature just because of its probabilistic approach.

## Output Files
The resulting radio flux densities and maximum emission frequencies
from "exoplanet_predictions.py" are written
out in two ways. First, the potentially visible candidates were determined from the magnetic and kinetic RBLs, and the candidates determined from an integration of both RBLs are separated, sorted by their names, frequencies, and flux densities
separately into nine .txt files in the folder "Old Result Tables". 
Secondly, only the "both" RBL methods results for all exoplanets are written out to csv files with the uncertainties included in "Output Tables". In this case, the results for all exoplanets can be found in "all.csv", while there also exist five different files that are subsets of this file, divided from the expected frequencies.

Finally, "extract.py" and "append.py" create the tables "final-table.csv" and "append.csv", respectively. These two files constitute the two tables that are displayed in the manuscript.


## Known Problems
Known problems of the project are summarized in the markdown file 
"known_problems.md".
